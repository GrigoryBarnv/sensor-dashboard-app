<!DOCTYPE html>
<html lang="de" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sensor-Daten-Dashboard</title>
    <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
    <div class="container py-4">
        <header class="app-header text-center">
            <h1 class="display-5 fw-bold">Sensor-Daten-Dashboard</h1>
            <p class="lead">Interaktive Visualisierung von CSV-Sensordaten</p>
        </header>

        <main>
            <div class="row">
                <div class="col-md-3">
                    <div class="sticky-top pt-3">
                        <div class="sensor-panel mb-4">
                            <h4 class="mb-3">Sensor auswählen</h4>
                            <div class="sensor-buttons d-flex flex-wrap justify-content-between">
                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ2">
                                    <div class="d-flex flex-column align-items-center text-center">
                                        <span class="sensor-name">MQ2 Sensor</span>
                                        <small class="sensor-unit text-muted">Ohm</small>
                                    </div>
                                </button>
                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ3_1">
                                    <div class="d-flex flex-column align-items-center text-center">
                                        <span class="sensor-name">MQ3_1 Sensor</span>
                                        <small class="sensor-unit text-muted">Ohm</small>
                                    </div>
                                </button>

                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ3_10">

                                    <div class="d-flex flex-column align-items-center text-center">
                                        <div class="d-flex flex-column align-items-center text-center">
                                            <span class="sensor-name">MQ3_10 Sensor</span>
                                            <small class="sensor-unit text-muted">Ohm</small>
                                        </div>
                                    </div>
                                </button>

                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ4">
                                    <div class="d-flex flex-column align-items-center text-center">
                                        <span class="sensor-name">MQ4 Sensor</span>
                                        <small class="sensor-unit text-muted">Ohm</small>
                                    </div>
                                </button>
                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ5">
                                    <div class="d-flex flex-column align-items-center text-center">
                                        <span class="sensor-name">MQ5 Sensor</span>
                                        <small class="sensor-unit text-muted">Ohm</small>
                                    </div>
                                </button>
                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ6">
                                    <div class="d-flex flex-column align-items-center text-center">
                                        <span class="sensor-name">MQ6 Sensor</span>
                                        <small class="sensor-unit text-muted">Ohm</small>
                                    </div>
                                </button>
                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ8">
                                    <div class="d-flex flex-column align-items-center text-center">
                                        <span class="sensor-name">MQ8 Sensor</span>
                                        <small class="sensor-unit text-muted">Ohm</small>
                                    </div>
                                </button>
                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ9">
                                    <div class="d-flex flex-column align-items-center text-center">
                                        <span class="sensor-name">MQ9 Sensor</span>
                                        <small class="sensor-unit text-muted">Ohm</small>
                                    </div>
                                </button>
                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ135">
                                    <div class="d-flex flex-column align-items-center text-center">
                                        <span class="sensor-name">MQ135 Sensor</span>
                                        <small class="sensor-unit text-muted">Ohm</small>
                                    </div>
                                </button>
                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ136">
                                    <div class="d-flex flex-column align-items-center text-center">
                                        <span class="sensor-name">MQ136 Sensor</span>
                                        <small class="sensor-unit text-muted">Ohm</small>
                                    </div>
                                </button>
                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ137">
                                    <div class="d-flex flex-column align-items-center text-center">
                                        <span class="sensor-name">MQ137 Sensor</span>
                                        <small class="sensor-unit text-muted">Ohm</small>
                                    </div>
                                </button>
                                <button class="btn btn-outline-primary sensor-button m-1 px-3 py-2" style="width: 47%;"
                                    data-sensor-id="MQ138">
                                    <div class="d-flex flex-column align-items-center text-center">
                                        <span class="sensor-name">MQ138 Sensor</span>
                                        <small class="sensor-unit text-muted">Ohm</small>
                                    </div>
                                </button>
                            </div>
                        </div>

                        <div class="mt-4">
                            <button id="csv-preview-toggle" class="btn btn-sm btn-outline-secondary">CSV-Vorschau
                                anzeigen</button>
                            <div id="csv-preview" class="csv-preview d-none">
                                {% if csv_data_preview %}
                                <div class="p-2">
                                    <h6>Datei: {{ csv_data_preview.filename }}</h6>
                                    <p class="small">Zeilen: {{ csv_data_preview.rows }} | Spalten: {{
                                        csv_data_preview.columns|length }}</p>
                                    <div class="table-responsive">
                                        <table class="table table-sm table-dark">
                                            <thead>
                                                <tr>
                                                    {% for col in csv_data_preview.columns %}
                                                    <th>{{ col }}</th>
                                                    {% endfor %}
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for row in csv_data_preview.preview %}
                                                <tr>
                                                    {% for col in csv_data_preview.columns %}
                                                    <td>{{ row[col] }}</td>
                                                    {% endfor %}
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                {% else %}
                                <div class="p-2">
                                    <p>Keine CSV-Daten verfügbar.</p>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>



                

                <div class="col-md-9">

                    <!-- container for holding the visualization -->
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h4 id="visualization-title">Ausgewählter Sensor</h4>
                            <span id="active-sensor-badge" class="badge bg-primary d-none">Sensor</span>
                        </div>
                        <div class="card-body visualization-container">
                            <div id="loading-spinner" class="spinner-border loading-spinner d-none" role="status">
                                <span class="visually-hidden">Lade...</span>
                            </div>
                            <div id="error-container" class="alert alert-danger error-message d-none" role="alert">
                            </div>

                            <!-- container for chart -->
                            <div id="chart-container" class="chart-container">
                                <div id="plot" style="width: 100%; height: 400px;"></div>
                            </div>

                            <div id="initial-message" class="text-center p-5 d-none">
                                <p class="lead text-muted">Bitte wählen Sie einen Sensor aus der linken Liste</p>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-3">
                        <div class="card-body">
                            <h5>Über die MQ-Gassensoren</h5>
                            <p>Klicken Sie auf einen Sensor, um dessen Datenvisualisierung anzuzeigen.</p>
                            <p>Unterstützte Sensor-Typen:</p>
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><strong>MQ2:</strong> Beschreibung MQ2</li>
                                        <li><strong>MQ3_1:</strong> Beschreibung MQ3</li>
                                        <li><strong>MQ3_10:</strong> Beschreibung MQ3</li>
                                        <li><strong>MQ4:</strong> Beschreibung MQ4</li>
                                        <li><strong>MQ5:</strong> Beschreibung MQ5</li>
                                        <li><strong>MQ6:</strong> Beschreibung MQ6</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><strong>MQ8:</strong> Beschreibung MQ8</li>
                                        <li><strong>MQ9:</strong>Beschreibung MQ9</li>
                                        <li><strong>MQ135:</strong>Beschreibung MQ135</li>
                                        <li><strong>MQ136:</strong>Beschreibung MQ136</li>
                                        <li><strong>MQ137:</strong> Beschreibung MQ137</li>
                                        <li><strong>MQ138:</strong> Beschreibung MQ138</li>
                                    </ul>
                                </div>
                            </div>
                            <p class="mt-3"><small>Die Sensorwerte repräsentieren Daten. niedrigere Werte deuten auf
                                    eine höhere Gaskonzentration hin.</small></p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="app-footer">
            <p>&copy; 2025 Sensor-Daten-Dashboard</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>